<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.143.0"><meta name=generator content="Relearn 7.2.1"><meta name=description content="Lakeflow Declarative Pipelines Sink Demo This demo will perform following steps:
Showcase onboarding process for dlt writing to external sink pattern Run onboarding for the bronze iot events Publish test events to kafka topic Run Bronze Lakeflow Declarative Pipelines which will read from kafka source topic and write to: Events delta table into UC Create quarantine table as per data quality expectations Writes to external kafka topics Writes to external dbfs location as external delta sink Steps: Launch Command Prompt"><meta name=author content="Ravi Gawai (Databricks)"><meta name=twitter:card content="summary"><meta name=twitter:title content="Lakeflow Declarative Pipelines Sink Demo :: DLT-META"><meta name=twitter:description content="Lakeflow Declarative Pipelines Sink Demo This demo will perform following steps:
Showcase onboarding process for dlt writing to external sink pattern Run onboarding for the bronze iot events Publish test events to kafka topic Run Bronze Lakeflow Declarative Pipelines which will read from kafka source topic and write to: Events delta table into UC Create quarantine table as per data quality expectations Writes to external kafka topics Writes to external dbfs location as external delta sink Steps: Launch Command Prompt"><meta property="og:url" content="https://databrickslabs.github.io/dlt-meta/demo/dlt_sink/index.html"><meta property="og:site_name" content="DLT-META"><meta property="og:title" content="Lakeflow Declarative Pipelines Sink Demo :: DLT-META"><meta property="og:description" content="Lakeflow Declarative Pipelines Sink Demo This demo will perform following steps:
Showcase onboarding process for dlt writing to external sink pattern Run onboarding for the bronze iot events Publish test events to kafka topic Run Bronze Lakeflow Declarative Pipelines which will read from kafka source topic and write to: Events delta table into UC Create quarantine table as per data quality expectations Writes to external kafka topics Writes to external dbfs location as external delta sink Steps: Launch Command Prompt"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="Demo"><meta property="article:published_time" content="2024-02-26T14:25:26-04:00"><meta property="article:modified_time" content="2024-02-26T14:25:26-04:00"><meta itemprop=name content="Lakeflow Declarative Pipelines Sink Demo :: DLT-META"><meta itemprop=description content="Lakeflow Declarative Pipelines Sink Demo This demo will perform following steps:
Showcase onboarding process for dlt writing to external sink pattern Run onboarding for the bronze iot events Publish test events to kafka topic Run Bronze Lakeflow Declarative Pipelines which will read from kafka source topic and write to: Events delta table into UC Create quarantine table as per data quality expectations Writes to external kafka topics Writes to external dbfs location as external delta sink Steps: Launch Command Prompt"><meta itemprop=datePublished content="2024-02-26T14:25:26-04:00"><meta itemprop=dateModified content="2024-02-26T14:25:26-04:00"><meta itemprop=wordCount content="220"><title>Lakeflow Declarative Pipelines Sink Demo :: DLT-META</title>
<link href=https://databrickslabs.github.io/dlt-meta/css/fontawesome-all.min.css?1757984441 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://databrickslabs.github.io/dlt-meta/css/fontawesome-all.min.css?1757984441 rel=stylesheet></noscript><link href=https://databrickslabs.github.io/dlt-meta/css/auto-complete.css?1757984441 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://databrickslabs.github.io/dlt-meta/css/auto-complete.css?1757984441 rel=stylesheet></noscript><link href=https://databrickslabs.github.io/dlt-meta/css/perfect-scrollbar.min.css?1757984441 rel=stylesheet><link href=https://databrickslabs.github.io/dlt-meta/css/theme.min.css?1757984441 rel=stylesheet><link href=https://databrickslabs.github.io/dlt-meta/css/format-html.min.css?1757984441 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../..",window.relearn.relBaseUri="../..",window.relearn.absBaseUri="https://databrickslabs.github.io/dlt-meta",window.relearn.min=`.min`,window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.themevariants=["learn"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}}))},window.relearn.markVariant=function(){var t=window.localStorage.getItem(window.relearn.absBaseUri+"/variant"),e=document.querySelector("#R-select-variant");e&&(e.value=t)},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><script async defer src=https://buttons.github.io/buttons.js></script></head><body class="mobile-support html" data-url=https://databrickslabs.github.io/dlt-meta/demo/dlt_sink/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><ul><li><a href=#lakeflow-declarative-pipelines-sink-demo>Lakeflow Declarative Pipelines Sink Demo</a></li><li><a href=#steps>Steps:</a></li></ul></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=https://databrickslabs.github.io/dlt-meta/index.html><span itemprop=name>DLT-META</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=https://databrickslabs.github.io/dlt-meta/demo/index.html><span itemprop=name>Demo</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Lakeflow Declarative Pipelines Sink Demo</span><meta itemprop=position content="3"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=https://databrickslabs.github.io/dlt-meta/demo/apply_changes_from_snapshot/index.html title="Silver Fanout Demo (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=https://databrickslabs.github.io/dlt-meta/demo/dab/index.html title="DAB Demo (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable demo" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=lakeflow-declarative-pipelines-sink-demo>Lakeflow Declarative Pipelines Sink Demo</h1><h3 id=lakeflow-declarative-pipelines-sink-demo>Lakeflow Declarative Pipelines Sink Demo</h3><p>This demo will perform following steps:</p><ul><li>Showcase onboarding process for dlt writing to external sink pattern</li><li>Run onboarding for the bronze iot events</li><li>Publish test events to kafka topic</li><li>Run Bronze Lakeflow Declarative Pipelines which will read from kafka source topic and write to:<ul><li>Events delta table into UC</li><li>Create quarantine table as per data quality expectations</li><li>Writes to external kafka topics</li><li>Writes to external dbfs location as external delta sink</li></ul></li></ul><h3 id=steps>Steps:</h3><ol><li><p>Launch Command Prompt</p></li><li><p>Install <a href=https://docs.databricks.com/dev-tools/cli/index.html rel=external target=_blank>Databricks CLI</a></p><ul><li>Once you install Databricks CLI, authenticate your current machine to a Databricks Workspace:</li></ul><div class="highlight wrap-code"><pre tabindex=0><code class=language-commandline data-lang=commandline>databricks auth login --host WORKSPACE_HOST</code></pre></div></li><li><p>Install Python package requirements:</p><div class="highlight wrap-code"><pre tabindex=0><code class=language-commandline data-lang=commandline># Core requirements
pip install &#34;PyYAML&gt;=6.0&#34; setuptools databricks-sdk

# Development requirements
pip install flake8==6.0 delta-spark==3.0.0 pytest&gt;=7.0.0 coverage&gt;=7.0.0 pyspark==3.5.5</code></pre></div></li><li><p>Clone dlt-meta:</p><div class="highlight wrap-code"><pre tabindex=0><code class=language-commandline data-lang=commandline>git clone https://github.com/databrickslabs/dlt-meta.git </code></pre></div></li><li><p>Navigate to project directory:</p><div class="highlight wrap-code"><pre tabindex=0><code class=language-commandline data-lang=commandline>cd dlt-meta</code></pre></div></li><li><p>Set python environment variable into terminal:</p><div class="highlight wrap-code"><pre tabindex=0><code class=language-commandline data-lang=commandline>dlt_meta_home=$(pwd)
export PYTHONPATH=$dlt_meta_home</code></pre></div></li><li><p>Configure Kafka (Optional):
If you are using secrets for kafka, create databricks secrets scope for source and sink kafka:</p><div class="highlight wrap-code"><pre tabindex=0><code class=language-commandline data-lang=commandline>databricks secrets create-scope &lt;&lt;n&gt;&gt;</code></pre></div><div class="highlight wrap-code"><pre tabindex=0><code class=language-commandline data-lang=commandline>databricks secrets put-secret --json &#39;{
    &#34;scope&#34;: &#34;&lt;&lt;n&gt;&gt;&#34;,
    &#34;key&#34;: &#34;&lt;&lt;keyname&gt;&gt;&#34;,
    &#34;string_value&#34;: &#34;&lt;&lt;value&gt;&gt;&#34;
}&#39;</code></pre></div></li><li><p>Run the command:</p><div class="highlight wrap-code"><pre tabindex=0><code class=language-commandline data-lang=commandline>python demo/launch_dlt_sink_demo.py --uc_catalog_name=&lt;&lt;uc_catalog_name&gt;&gt; --source=kafka --kafka_source_topic=&lt;&lt;kafka source topic name&gt;&gt; --kafka_sink_topic=&lt;&lt;kafka sink topic name&gt;&gt; --kafka_source_servers_secrets_scope_name=&lt;&lt;kafka source servers secret name&gt;&gt; --kafka_source_servers_secrets_scope_key=&lt;&lt;kafka source server secret scope key name&gt;&gt; --kafka_sink_servers_secret_scope_name=&lt;&lt;kafka sink server secret scope key name&gt;&gt; --kafka_sink_servers_secret_scope_key=&lt;&lt;kafka sink servers secret scope key name&gt;&gt; --profile=&lt;&lt;DEFAULT&gt;&gt;</code></pre></div></li></ol><p><a href=#R-image-2a480d58d39343a69db629c75a8b9963 class=lightbox-link><img alt=dlt_demo_sink.png class="noborder lazy lightbox noshadow figure-image" loading=lazy src=https://databrickslabs.github.io/dlt-meta/images/dlt_demo_sink.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2a480d58d39343a69db629c75a8b9963><img alt=dlt_demo_sink.png class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=https://databrickslabs.github.io/dlt-meta/images/dlt_demo_sink.png></a>
<a href=#R-image-27d1aeb4c28fa0cbee5ab44c01f4a60a class=lightbox-link><img alt=dlt_delta_sink.png class="noborder lazy lightbox noshadow figure-image" loading=lazy src=https://databrickslabs.github.io/dlt-meta/images/dlt_delta_sink.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-27d1aeb4c28fa0cbee5ab44c01f4a60a><img alt=dlt_delta_sink.png class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=https://databrickslabs.github.io/dlt-meta/images/dlt_delta_sink.png></a>
<a href=#R-image-6d4c65f4074b519153d0cfd975bf0660 class=lightbox-link><img alt=dlt_kafka_sink.png class="noborder lazy lightbox noshadow figure-image" loading=lazy src=https://databrickslabs.github.io/dlt-meta/images/dlt_kafka_sink.png style=height:auto;width:auto></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-6d4c65f4074b519153d0cfd975bf0660><img alt=dlt_kafka_sink.png class="noborder lazy lightbox noshadow lightbox-image" loading=lazy src=https://databrickslabs.github.io/dlt-meta/images/dlt_kafka_sink.png></a></p><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><a id=logo href=https://databrickslabs.github.io/dlt-meta/></a></div><script>window.index_js_url="https://databrickslabs.github.io/dlt-meta/searchindex.en.js?1757984441"</script><search><form action=https://databrickslabs.github.io/dlt-meta/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search><script>var contentLangs=["en"]</script><script src=https://databrickslabs.github.io/dlt-meta/js/auto-complete.js?1757984441 defer></script><script src=https://databrickslabs.github.io/dlt-meta/js/lunr/lunr.min.js?1757984441 defer></script><script src=https://databrickslabs.github.io/dlt-meta/js/lunr/lunr.stemmer.support.min.js?1757984441 defer></script><script src=https://databrickslabs.github.io/dlt-meta/js/lunr/lunr.multi.min.js?1757984441 defer></script><script src=https://databrickslabs.github.io/dlt-meta/js/lunr/lunr.en.min.js?1757984441 defer></script><script src=https://databrickslabs.github.io/dlt-meta/js/search.js?1757984441 defer></script></div><div id=R-homelinks class="default-animation homelinks"><ul><li><a class=padding href=https://databrickslabs.github.io/dlt-meta/index.html><i class="fa-fw fas fa-home"></i> Home</a></li></ul><hr class=padding></div><div id=R-content-wrapper class=highlightable><div id=R-shortcutmenu-home class=R-sidebarmenu><ul class="enlarge morespace collapsible-menu"><li data-nav-id=/getting_started/index.html><a class=padding href=https://databrickslabs.github.io/dlt-meta/getting_started/index.html>Getting Started</a><ul id=R-subsections-d1738ab40ac858ee010dd1d061d67a7f class=collapsible-menu></ul></li><li class=parent data-nav-id=/demo/index.html><a class=padding href=https://databrickslabs.github.io/dlt-meta/demo/index.html>Demo</a><ul id=R-subsections-53a21a31163cea6582840a4862f776cf class=collapsible-menu><li data-nav-id=/demo/dais/index.html><a class=padding href=https://databrickslabs.github.io/dlt-meta/demo/dais/index.html>DAIS DEMO</a></li><li data-nav-id=/demo/techsummit/index.html><a class=padding href=https://databrickslabs.github.io/dlt-meta/demo/techsummit/index.html>Tech Summit DEMO</a></li><li data-nav-id=/demo/append_flow_cf/index.html><a class=padding href=https://databrickslabs.github.io/dlt-meta/demo/append_flow_cf/index.html>Append FLOW Autoloader Demo</a></li><li data-nav-id=/demo/append_flow_eh/index.html><a class=padding href=https://databrickslabs.github.io/dlt-meta/demo/append_flow_eh/index.html>Append FLOW Eventhub Demo</a></li><li data-nav-id=/demo/silver_fanout/index.html><a class=padding href=https://databrickslabs.github.io/dlt-meta/demo/silver_fanout/index.html>Silver Fanout Demo</a></li><li data-nav-id=/demo/apply_changes_from_snapshot/index.html><a class=padding href=https://databrickslabs.github.io/dlt-meta/demo/apply_changes_from_snapshot/index.html>Silver Fanout Demo</a></li><li class=active data-nav-id=/demo/dlt_sink/index.html><a class=padding href=https://databrickslabs.github.io/dlt-meta/demo/dlt_sink/index.html>Lakeflow Declarative Pipelines Sink Demo</a></li><li data-nav-id=/demo/dab/index.html><a class=padding href=https://databrickslabs.github.io/dlt-meta/demo/dab/index.html>DAB Demo</a></li></ul></li><li data-nav-id=/additionals/index.html><a class=padding href=https://databrickslabs.github.io/dlt-meta/additionals/index.html>Additional</a><ul id=R-subsections-1f3a6cf9d973879a2216966b6cbb3667 class=collapsible-menu></ul></li><li data-nav-id=/faq/index.html><a class=padding href=https://databrickslabs.github.io/dlt-meta/faq/index.html>Frequently Asked Questions (FAQs)</a><ul id=R-subsections-24e4fc446616bf2bbeac7b1dba804bb8 class=collapsible-menu></ul></li><li data-nav-id=/contributing/index.html><a class=padding href=https://databrickslabs.github.io/dlt-meta/contributing/index.html>Contributing</a><ul id=R-subsections-0d02badb7422c7536b9ac4528048a4b1 class=collapsible-menu></ul></li><li data-nav-id=/releases/index.html><a class=padding href=https://databrickslabs.github.io/dlt-meta/releases/index.html>Releases</a></li></ul></div><div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div><div id=R-menu-footer><hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"><div id=R-prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks"><ul><li id=R-select-language-container class=footerLangSwitch><div class="padding menu-control"><i class="fa-fw fas fa-language"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-language>Language</label>
<select id=R-select-language onchange="location=this.querySelector(this.value).dataset.url"><option id=R-select-language-en value=#R-select-language-en data-url=https://databrickslabs.github.io/dlt-meta/demo/dlt_sink/index.html lang=en-us selected></option></select></div><div class=clear></div></div></li><li id=R-select-variant-container class=footerVariantSwitch><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant onchange=window.relearn.changeVariant(this.value)><option id=R-select-variant-learn value=learn selected>Learn</option></select></div><div class=clear></div></div><script>window.relearn.markVariant()</script></li><li class=footerVisitedLinks><div class="padding menu-control"><i class="fa-fw fas fa-history"></i>
<span>&nbsp;</span><div class=control-style><button onclick=clearHistory()>Clear History</button></div><div class=clear></div></div></li></ul></div><div id=R-footer class="footerFooter showFooter"><center><a class=github-button href=https://github.com/databrickslabs/dlt-meta/subscription data-icon=octicon-eye data-show-count=true aria-label="DLT-META on GitHub">Watch</a>
<a class=github-button href=https://github.com/databrickslabs/dlt-meta data-icon=octicon-star data-show-count=true aria-label="Star databricks/dlt-meta on GitHub">Star</a>
<a class=github-button href=https://github.com/databrickslabs/dlt-meta/fork data-icon=octicon-repo-forked data-show-count=true aria-label="Fork DLT-META on GitHub">Fork</a><p>A <a href=https://github.com/databrickslabs>Databricks Labs</a> project.</p></center><script async defer src=https://buttons.github.io/buttons.js></script></div></div></div></aside><script src=https://databrickslabs.github.io/dlt-meta/js/clipboard.min.js?1757984441 defer></script><script src=https://databrickslabs.github.io/dlt-meta/js/perfect-scrollbar.min.js?1757984441 defer></script><script src=https://databrickslabs.github.io/dlt-meta/js/theme.js?1757984441 defer></script></body></html>